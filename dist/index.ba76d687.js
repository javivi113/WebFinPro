let getsVal;function delBaliza(a){let e=JSON.parse(localStorage.getItem("balizasGuardadas")),i=new Array,t=0,o=0;e.forEach((e=>{e[0]==a&&(o=t),t++})),t=0;let n=0;e.forEach((a=>{t!=o&&(i[n]=a,n++),t++})),localStorage.setItem("balizasGuardadas",JSON.stringify([...i])),cambioInicial()}function addBaliza(){let a=new Array,e=new Set,i=this.value,t=0;cambioSit();let o=localStorage.getItem("balizasGuardadas");null==o?(console.log("solo hay uno"),a[0]=[i,"","","",""],document.getElementById("dGuardadoError").innerHTML="",fetch(`${urlTiempo}/${i}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${JSON.parse(localStorage.getItem("Key"))}`}}).then((a=>a.json())).then((a=>{crearBloque(a.municipio,a.temperatura,a.descripcionTiempo,a.pathImg,a.velocidadViento,a.precipitaciones)})).catch((a=>console.log(a))),localStorage.setItem("balizasGuardadas",JSON.stringify([...a]))):(document.getElementById("dGuardadoError").innerHTML="",e=new Set,getsVal=JSON.parse(o),getsVal.forEach((i=>{e.add(i[0]),a[t]=i,t++})),e.has(i)||(e.size<3?(a[t]=[i,"","","",""],e.add(i),fetch(`${urlTiempo}/${i}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${JSON.parse(localStorage.getItem("Key"))}`}}).then((a=>a.json())).then((a=>{crearBloque(a.municipio,a.temperatura,a.descripcionTiempo,a.pathImg,a.velocidadViento,a.precipitaciones)})).catch((a=>console.log(a)))):alert("No puedes a√±adir mas de 3 balizas.")),localStorage.setItem("balizasGuardadas",JSON.stringify([...a])))}function crearBloque(a,e,i,t,o,n){var r=new Date;document.getElementById("dBalizasGuar").innerHTML+=`<div class="col-sm-3 balizasGuardada dropAqui" value="${a}">\n        <h6 class="hLocalidadGuardada">${a}</h6>\n        <div class="dBloqueDatos">\n            <div class="dEstado" id="dDatEstado${a}">\n                \x3c!--<p>${r.getHours()}:${r.getMinutes()}</p>--\x3e\n                <p>${i}</p>\n            </div>\n            <div class="dDatoParam" id="dDatTiempo${a}">\n                <i class="bi bi-x-circle btnExit" id="Tiempo_${a}" value="${a}"></i>  \n                <i class="bi bi-cloud-sun iconoPanel"><img src="https://opendata.euskadi.eus/${t}" class="iEstadoTiempo"></img></i>\n            </div> \n            <div class="dDatoParam" id="dDatTemperatura${a}">\n                <i class="bi bi-x-circle btnExit" id="Temperatura_${a}" value="${a}"></i> \n                <i class="bi bi-thermometer iconoPanel"><span id="spParam1">${e}&deg;C</span></i>\n            </div>\n            <div class="dDatoParam" id="dDatPrecipitaciones${a}">\n                <i class="bi bi-x-circle btnExit" id="Precipitaciones_${a}" value="${a}"></i> \n                <i class="bi bi-moisture iconoPanel"><span id="spParam2">${n} ml/h</span></i>\n            </div>  \n            <div class="dDatoParam" id="dDatVelViento${a}">\n                <i class="bi bi-x-circle btnExit" id="VelViento_${a}" value="${a}"></i> \n                <i class="bi bi-wind iconoPanel"><span id="spParam3">${o} km/h</span></i>\n            </div>\n                       \n        </div>    \n    </div>`,crearBloqueDraggable(),cierraBotones(),paramDrop(),ocultarMostrarParametro(a)}function ocultarMostrarParametro(a){let e=JSON.parse(localStorage.getItem("balizasGuardadas")),i=0,t=0;e.forEach((e=>{e[0]==a&&(t=i),i++})),e[t].forEach((e=>{e!=a&&$(`#dDat${e}${a}`).show(),console.log(`#dDat${e}${a}`)}))}function posParametro(a){switch(a){case"Tiempo":return 1;case"Precipitaciones":return 3;case"Temperatura":return 2;case"VelViento":return 4}}function editarBloque(a,e,i,t,o,n){document.getElementById(`dDatTiempo${a}`).innerHTML=`\n    <i class="bi bi-x-circle btnExit" id="Tiempo_${a}" value="${a}"></i>  \n    <i class="bi bi-cloud-sun iconoPanel"><img src="https://opendata.euskadi.eus/${t}" class="iEstadoTiempo"></img></i>`,document.getElementById(`dDatTemperatura${a}`).innerHTML=`<i class="bi bi-x-circle btnExit" id="Temperatura_${a}" value="${a}"></i> \n    <i class="bi bi-thermometer iconoPanel"><span id="spParam1">${e}&deg;C</span></i>`,document.getElementById(`dDatPrecipitaciones${a}`).innerHTML=` <i class="bi bi-x-circle btnExit" id="Precipitaciones_${a}" value="${a}"></i> \n    <i class="bi bi-moisture iconoPanel"><span id="spParam2">${n} ml/h</span></i>`,document.getElementById(`dDatVelViento${a}`).innerHTML=`<i class="bi bi-x-circle btnExit" id="velViento_${a}" value="${a}"></i> \n    <i class="bi bi-wind iconoPanel"><span id="spParam3">${o} km/h</span></i>`,document.getElementById(`dDatEstado${a}`).innerHTML=`<p>${i}</p>`,crearBloqueDraggable(),cierraBotones(),paramDrop()}function cierraBotones(){$(".btnExit").on("click",(a=>{a.target.parentElement.style.display="none";let e=a.target.id.split("_"),i=e[0],t=e[1];$(`#dDat${i}${t}`).hide();let o=JSON.parse(localStorage.getItem("balizasGuardadas")),n=0,r=0;console.log(i),console.log(t);let s=0;switch(i){case"Tiempo":s=1;break;case"Precipitaciones":s=3;break;case"Temperatura":s=2;break;case"VelViento":s=4}o.forEach((a=>{a[0]==t&&(r=n),n++})),console.log(s),console.log(o[r]),o[r][s]="",console.log(o[r][s]),localStorage.setItem("balizasGuardadas",JSON.stringify([...o]))}))}function verBaliza(){let a=this.value;cambioVerBaliza(),document.getElementById("hCabBaliza").textContent=a}window.delBaliza=delBaliza,window.posParametro=posParametro,window.editarBloque=editarBloque;
//# sourceMappingURL=index.ba76d687.js.map
