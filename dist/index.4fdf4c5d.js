function e(e){return e&&e.__esModule?e.default:e}var a;const i=e(a=L).map("map").setView([43.01195,-2.56789],8.5);e(a).tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(i);const o=JSON.parse(aMarkers);let n=!1;var t=new(e(a).Icon)({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-black.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),l=new(e(a).Icon)({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),s=[];function c(){fetch(`${url}/api/Tiempo`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${JSON.parse(localStorage.getItem("Key"))}`}}).then((e=>e.json())).then((c=>{var r=new Set;let d=localStorage.getItem("balizasGuardadas"),p=new Array,u=0;null!=d&&JSON.parse(d).forEach((e=>{p[u]=e[0],u++})),0!=s.length&&s.forEach((e=>i.removeLayer(e))),o.forEach((o=>{c.forEach((c=>{let d=o.Municipio.toString().toLowerCase(),u=c.municipio.toString().toLowerCase();if(d.includes(u)&&!r.has(u))if(r.add(u),p.includes(u)){let l=e(a).marker([o.GpxY,o.GpxX],{icon:t}).bindPopup(u).addTo(i).on("click",(e=>{n?($("#dOpciones").slideToggle(50),$("#dOpciones").slideToggle(100)):($("#dOpciones").slideDown(100),n=!n),$("#dOpciones").html(`<div id="dBalSele"><p class="pDBaliza">${u}</p></div>\n            <button id="btnAñadirBaliza" class='btnOpciones' value='${u}'>Eliminar</button>\n            <button id="btnVerBaliza" class='btnOpciones' value='${u}'>Ver</button>`),$("#btnAñadirBaliza").on("click",addBaliza),$("#btnVerBaliza").on("click",verBaliza)}));s.push(l)}else{let t=e(a).marker([o.GpxY,o.GpxX],{icon:l}).bindPopup(u).addTo(i).on("click",(e=>{n?($("#dOpciones").slideToggle(50),$("#dOpciones").slideToggle(100)):($("#dOpciones").slideDown(100),n=!n),$("#dOpciones").html(`<div id="dBalSele"><p class="pDBaliza">${u}</p></div>\n            <button id="btnAñadirBaliza" class='btnOpciones' value='${u}'>Añadir</button>\n            <button id="btnVerBaliza" class='btnOpciones' value='${u}'>Ver</button>`),$("#btnAñadirBaliza").on("click",addBaliza),$("#btnVerBaliza").on("click",verBaliza)}));s.push(t)}}))}))})).catch((e=>console.log(e)))}let r=localStorage.getItem("Sesion");"false"==r||null==r?($("body").css({"background-image":"url(https://www.sansebastianturismoa.eus/images/tematicos/bahia_ss_686.jpg)","background-position":"center","background-repeat":"no-repeat","background-size":"cover"}),c(),setTimeout((function(){$("#SesionIniciada").hide()}),10),$(".dLogin").show(),$(".inicioPanel").show()):($(".dLogin").hide(),$("#SesionIniciada").show(),$(".inicioPanel").hide(),c(),cambioInicial());
//# sourceMappingURL=index.4fdf4c5d.js.map
