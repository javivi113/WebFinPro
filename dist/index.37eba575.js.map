{"mappings":"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","sources":["src/scripts/leaflet.js","L.js"],"sourcesContent":["import L from 'leaflet';\r\nconst map = L.map('map').setView([43.0119500, -2.56789], 8.5);\r\nL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nconst oMarker = JSON.parse(aMarkers);\r\nlet bPrim = false;\r\nvar selectIcon = new L.Icon({\r\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-black.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\nvar unSelectIcon = new L.Icon({\r\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\nvar arrayIdMarkadores = [];\r\n\r\nfunction colocarMarcadores() {\r\n    fetch(`${urlTiempo}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Authorization': `Bearer ${JSON.parse(localStorage.getItem(\"Key\"))}`,\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(api => {\r\n            let i = 0;\r\n            //console.log(api)\r\n            //map.removeLayer(marker)\r\n            var getsVal = [\"\"];\r\n            var stMunipaNoRep = new Set();\r\n            let valGuardados = localStorage.getItem(\"balizasGuardadas\");\r\n            let aSoloBalizas = new Array();\r\n            let iPosAbali = 0;\r\n            if (valGuardados != undefined) {\r\n                getsVal = JSON.parse(valGuardados);\r\n                getsVal.forEach(a => {\r\n                    aSoloBalizas[iPosAbali] = a[0];\r\n                    iPosAbali++;\r\n                })\r\n            }\r\n            if (arrayIdMarkadores.length != 0) {\r\n                arrayIdMarkadores.forEach(id => map.removeLayer(id))\r\n            }\r\n            oMarker.forEach(b => {\r\n                api.forEach(munici => {\r\n                    let puebloJson = b.Municipio;\r\n                    let puebloJMinus = puebloJson.toString().toLowerCase();\r\n                    let puebloApi = munici.municipio;\r\n                    let puebloAMinus = puebloApi.toString().toLowerCase();\r\n                    if (puebloJMinus.includes(puebloAMinus)) {\r\n                        //console.log(`${puebloAMinus}=>${puebloJMinus}`)\r\n                        if (!stMunipaNoRep.has(puebloAMinus)) {\r\n                            stMunipaNoRep.add(puebloAMinus);\r\n                            //console.log(getsVal+\"=>\"+b.Municipio)   \r\n                            if (aSoloBalizas.includes(puebloAMinus)) {\r\n                                let marcador = L.marker([b.GpxY, b.GpxX], { icon: selectIcon })\r\n                                    .bindPopup(puebloAMinus)\r\n                                    .addTo(map)\r\n                                    .on(\"click\", k => {\r\n                                        if (!bPrim) {\r\n                                            $(\"#dOpciones\").slideDown(100);\r\n                                            bPrim = !bPrim;\r\n                                        } else {\r\n                                            $(\"#dOpciones\").slideToggle(50);\r\n                                            $(\"#dOpciones\").slideToggle(100);\r\n                                        }\r\n                                        $(\"#dOpciones\").html(`<div id=\"dBalSele\"><p class=\"pDBaliza\">${puebloAMinus}</p></div>\r\n            <button id=\"btnAñadirBaliza\" class='btnOpciones' value='${puebloAMinus}'>Eliminar</button>\r\n            <button id=\"btnVerBaliza\" class='btnOpciones' value='${puebloAMinus}'>Ver</button>`);\r\n                                        $(\"#btnAñadirBaliza\").on(\"click\", addBaliza);\r\n                                        $(\"#btnVerBaliza\").on(\"click\", verBaliza);\r\n\r\n                                    })\r\n                                arrayIdMarkadores.push(marcador);\r\n                            } else {\r\n                                let marcador = L.marker([b.GpxY, b.GpxX], { icon: unSelectIcon })\r\n                                    .bindPopup(puebloAMinus)\r\n                                    .addTo(map)\r\n                                    .on(\"click\", k => {\r\n                                        if (!bPrim) {\r\n                                            $(\"#dOpciones\").slideDown(100);\r\n                                            bPrim = !bPrim;\r\n                                        } else {\r\n                                            $(\"#dOpciones\").slideToggle(50);\r\n                                            $(\"#dOpciones\").slideToggle(100);\r\n                                        }\r\n                                        $(\"#dOpciones\").html(`<div id=\"dBalSele\"><p class=\"pDBaliza\">${puebloAMinus}</p></div>\r\n            <button id=\"btnAñadirBaliza\" class='btnOpciones' value='${puebloAMinus}'>Añadir</button>\r\n            <button id=\"btnVerBaliza\" class='btnOpciones' value='${puebloAMinus}'>Ver</button>`);\r\n                                        $(\"#btnAñadirBaliza\").on(\"click\", addBaliza);\r\n                                        $(\"#btnVerBaliza\").on(\"click\", verBaliza);\r\n\r\n                                    })\r\n                                arrayIdMarkadores.push(marcador);\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            });\r\n        })\r\n        .catch(err => console.log(err));\r\n}\r\nwindow.colocarMarcadores;\r\nlet lsSesion = localStorage.getItem(\"Sesion\")\r\nif (lsSesion == \"false\" || lsSesion == undefined) {\r\n    $(\"body\").css({\r\n        \"background-image\": \"url(https://www.sansebastianturismoa.eus/images/tematicos/bahia_ss_686.jpg)\",\r\n        \"background-position\": \"center\",\r\n        \"background-repeat\": \"no-repeat\",\r\n        \"background-size\": \"cover\"\r\n    });\r\n    colocarMarcadores();\r\n    document.getElementById(\"aInicio\").addEventListener(\"click\", function(){\r\n        colocarMarcadores();\r\n        cambioIni();        \r\n    });\r\n    setTimeout(function () { $(\"#SesionIniciada\").hide() }, 10);\r\n    $(\".dLogin\").show();\r\n    $(\".inicioPanel\").show();\r\n} else {\r\n    $(\".dLogin\").hide();\r\n    $(\"#SesionIniciada\").show();\r\n    $(\".inicioPanel\").hide();\r\n    colocarMarcadores();\r\n    document.getElementById(\"aInicio\").addEventListener(\"click\", function(){\r\n        colocarMarcadores();\r\n        cambioIni();        \r\n    });\r\n    cambioInicial();\r\n}\r\n\r\n","module.exports=L;"],"names":["$7c236aadba25b053$var$map","$parcel$interopDefault","$66ba7a37141049c3$exports","L","map","setView","tileLayer","addTo","$7c236aadba25b053$var$oMarker","JSON","parse","aMarkers","$7c236aadba25b053$var$bPrim","$7c236aadba25b053$var$selectIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","$7c236aadba25b053$var$unSelectIcon","$7c236aadba25b053$var$arrayIdMarkadores","$7c236aadba25b053$var$colocarMarcadores","fetch","urlTiempo","method","headers","Accept","Authorization","localStorage","getItem","then","response","json","api","stMunipaNoRep","Set","valGuardados","aSoloBalizas","Array","iPosAbali","undefined","forEach","a","length","id","removeLayer","b","munici","puebloJMinus","Municipio","toString","toLowerCase","puebloAMinus","municipio","includes","has","add","marcador","marker","GpxY","GpxX","icon","bindPopup","on","k","$","slideToggle","slideDown","html","addBaliza","verBaliza","push","catch","err","console","log","$7c236aadba25b053$var$lsSesion","css","document","getElementById","addEventListener","cambioIni","setTimeout","hide","show"],"version":3,"file":"index.37eba575.js.map"}