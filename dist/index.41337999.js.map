{"mappings":"uDACA,MAAMA,EAAMC,ECDZC,EAAeC,GDCDC,IAAI,OAAOC,QAAQ,CAAC,UAAY,SAAW,KACzDJ,EAAAC,GAAEI,UAAU,sDAAsDC,MAAMP,GAExE,MAAMQ,EAAUC,KAAKC,MAAMC,UAC3B,IAAIC,GAAQ,EACZ,IAAIC,EAAa,IAAIZ,EAAAC,GAAEY,MAAK,CACxBC,QAAS,sGACTC,UAAW,gFACXC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAG,IACjBC,WAAY,CAAC,GAAI,MAEjBC,EAAe,IAAIpB,EAAAC,GAAEY,MAAK,CAC1BC,QAAS,qGACTC,UAAW,gFACXC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAG,IACjBC,WAAY,CAAC,GAAI,MAEjBE,EAAoB,SA+FeC,aAAAC,QAAA,UACC,YAAAC,MAAAC,aACfC,IAAA,CACpB,mBAAA,8EACD,sBAAwB,SAAC,oBAAqB,YAAU,kBAAE,UAE1DC,YAAgB,WACZC,EAAA,mBAAAC,SACO,IACXD,EAAE,WAAiBE,OACnBF,EAAE,gBAAgBE,SAElBF,EAAA,WAAaC,OAChBD,EAAA,mBAAAE,gCAzGGC,MAAK,GAAIC,iBAAkB,CACvBC,OAAQ,MACRC,QAAS,CACLC,OAAU,mBACVC,cAAe,UAAY5B,KAAKC,MAAMa,aAAaC,QAAQ,aAG9Dc,MAAKC,GACKA,EAASC,SAEnBF,MAAKG,IAIF,IACIC,EAAgB,IAAIC,IACxB,IAAIC,EAAerB,aAAaC,QAAQ,oBACpCqB,EAAe,IAAIC,MACnBC,EAAY,EACItB,MAAhBmB,GACUnC,KAAKC,MAAMkC,GACbI,SAAQC,IACZJ,EAAaE,GAAaE,EAAE,GAC5BF,OAGwB,GAA5BzB,EAAkB4B,QAClB5B,EAAkB0B,SAAQG,GAAMnD,EAAIoD,YAAYD,KAEpD3C,EAAQwC,SAAQK,IACZZ,EAAIO,SAAQM,IACR,IACIC,EADaF,EAAEG,UACWC,WAAWC,cAErCC,EADYL,EAAOM,UACMH,WAAWC,cACxC,GAAIH,EAAaM,SAASF,KAEjBjB,EAAcoB,IAAIH,GAGnB,GAFAjB,EAAcqB,IAAIJ,GAEdd,EAAagB,SAASF,GAAe,CACrC,IAAIK,EAAW/D,EAAAC,GAAE+D,OAAO,CAACZ,EAAEa,KAAMb,EAAEc,MAAO,CAAEC,KAAMvD,IAC7CwD,UAAUV,GACVpD,MAAMP,GACNsE,GAAG,SAASC,IACJ3D,GAIDiB,EAAE,cAAc2C,YAAY,IAC5B3C,EAAE,cAAc2C,YAAY,OAJ5B3C,EAAE,cAAc4C,UAAU,KAC1B7D,GAASA,GAKbiB,EAAE,cAAc6C,KAAI,0CAA2Cf,oFAG5BA,0FACJA,mBAElC9B,EAAA,oBAAAyC,GAAA,QAAAK,WACL9C,EAAA,iBAAAyC,GAAA,QAAAM,cAEAtD,EAAeuD,KAAAb,YAAkBA,EAAM/D,EAAAC,GAAA+D,OAAA,CAAIZ,EAAAa,KAACb,EAAAc,MACvC,CAGGC,KAAK/C,cACasC,GAAEpD,MAASP,GAAIsE,GAAA,SAAAC,IAC7B3D,GAIHiB,EAAA,cAAA2C,YAAA,IACa3C,EAAA,cAAM2C,YAAE,OAJrB3C,EAAA,cAAO4C,UAAA,KACJ7D,GAA8BA,GAOlCiB,EAAE,cAAe6C,KAAI,0CAAmBf,oFAE3CA,wFACYA,mBACpB9B,EAAA,oBAAAyC,GAAA,QAAAK,WACJ9C,EAAA,iBAAAyC,GAAA,QAAAM,cAERtD,EAAAuD,KAAAb,aAMbc,OAAAC,GAAAC,QAAAC,IAAAF","sources":["src/scripts/leaflet.js","L.js"],"sourcesContent":["import L from 'leaflet';\r\nconst map = L.map('map').setView([43.0119500, -2.56789], 8.5);\r\nL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nconst oMarker = JSON.parse(aMarkers);\r\nlet bPrim = false;\r\nvar selectIcon = new L.Icon({\r\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-black.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\nvar unSelectIcon = new L.Icon({\r\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\nvar arrayIdMarkadores = [];\r\n\r\nfunction colocarMarcadores() {\r\n    fetch(`${url}/api/Tiempo`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Authorization': `Bearer ${JSON.parse(localStorage.getItem(\"Key\"))}`,\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(api => {\r\n            let i = 0;\r\n            //console.log(api)\r\n            //map.removeLayer(marker)\r\n            var getsVal = [\"\"];\r\n            var stMunipaNoRep = new Set();\r\n            let valGuardados = localStorage.getItem(\"balizasGuardadas\");\r\n            let aSoloBalizas = new Array();\r\n            let iPosAbali = 0;\r\n            if (valGuardados != undefined) {\r\n                getsVal = JSON.parse(valGuardados);\r\n                getsVal.forEach(a => {\r\n                    aSoloBalizas[iPosAbali] = a[0];\r\n                    iPosAbali++;\r\n                })\r\n            }\r\n            if (arrayIdMarkadores.length != 0) {\r\n                arrayIdMarkadores.forEach(id => map.removeLayer(id))\r\n            }\r\n            oMarker.forEach(b => {\r\n                api.forEach(munici => {\r\n                    let puebloJson = b.Municipio;\r\n                    let puebloJMinus = puebloJson.toString().toLowerCase();\r\n                    let puebloApi = munici.municipio;\r\n                    let puebloAMinus = puebloApi.toString().toLowerCase();\r\n                    if (puebloJMinus.includes(puebloAMinus)) {\r\n                        //console.log(`${puebloAMinus}=>${puebloJMinus}`)\r\n                        if (!stMunipaNoRep.has(puebloAMinus)) {\r\n                            stMunipaNoRep.add(puebloAMinus);\r\n                            //console.log(getsVal+\"=>\"+b.Municipio)   \r\n                            if (aSoloBalizas.includes(puebloAMinus)) {\r\n                                let marcador = L.marker([b.GpxY, b.GpxX], { icon: selectIcon })\r\n                                    .bindPopup(puebloAMinus)\r\n                                    .addTo(map)\r\n                                    .on(\"click\", k => {\r\n                                        if (!bPrim) {\r\n                                            $(\"#dOpciones\").slideDown(100);\r\n                                            bPrim = !bPrim;\r\n                                        } else {\r\n                                            $(\"#dOpciones\").slideToggle(50);\r\n                                            $(\"#dOpciones\").slideToggle(100);\r\n                                        }\r\n                                        $(\"#dOpciones\").html(`<div id=\"dBalSele\"><p class=\"pDBaliza\">${puebloAMinus}</p></div>\r\n            <button id=\"btnAñadirBaliza\" class='btnOpciones' value='${puebloAMinus}'>Eliminar</button>\r\n            <button id=\"btnVerBaliza\" class='btnOpciones' value='${puebloAMinus}'>Ver</button>`);\r\n                                        $(\"#btnAñadirBaliza\").on(\"click\", addBaliza);\r\n                                        $(\"#btnVerBaliza\").on(\"click\", verBaliza);\r\n\r\n                                    })\r\n                                arrayIdMarkadores.push(marcador);\r\n                            } else {\r\n                                let marcador = L.marker([b.GpxY, b.GpxX], { icon: unSelectIcon })\r\n                                    .bindPopup(puebloAMinus)\r\n                                    .addTo(map)\r\n                                    .on(\"click\", k => {\r\n                                        if (!bPrim) {\r\n                                            $(\"#dOpciones\").slideDown(100);\r\n                                            bPrim = !bPrim;\r\n                                        } else {\r\n                                            $(\"#dOpciones\").slideToggle(50);\r\n                                            $(\"#dOpciones\").slideToggle(100);\r\n                                        }\r\n                                        $(\"#dOpciones\").html(`<div id=\"dBalSele\"><p class=\"pDBaliza\">${puebloAMinus}</p></div>\r\n            <button id=\"btnAñadirBaliza\" class='btnOpciones' value='${puebloAMinus}'>Añadir</button>\r\n            <button id=\"btnVerBaliza\" class='btnOpciones' value='${puebloAMinus}'>Ver</button>`);\r\n                                        $(\"#btnAñadirBaliza\").on(\"click\", addBaliza);\r\n                                        $(\"#btnVerBaliza\").on(\"click\", verBaliza);\r\n\r\n                                    })\r\n                                arrayIdMarkadores.push(marcador);\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            });\r\n        })\r\n        .catch(err => console.log(err));\r\n}\r\nlet lsSesion = localStorage.getItem(\"Sesion\")\r\nif (lsSesion == \"false\" || lsSesion == undefined) {\r\n    $(\"body\").css({\r\n        \"background-image\": \"url(https://www.sansebastianturismoa.eus/images/tematicos/bahia_ss_686.jpg)\",\r\n        \"background-position\": \"center\",\r\n        \"background-repeat\": \"no-repeat\",\r\n        \"background-size\": \"cover\"\r\n    });\r\n    setTimeout(function () { $(\"#SesionIniciada\").hide() }, 10);\r\n    $(\".dLogin\").show();\r\n    $(\".inicioPanel\").show();\r\n} else {\r\n    $(\".dLogin\").hide();\r\n    $(\"#SesionIniciada\").show();\r\n    $(\".inicioPanel\").hide();\r\n    colocarMarcadores();\r\n    cambioInicial();\r\n}\r\n\r\n","module.exports=L;"],"names":["$7c236aadba25b053$var$map","$parcel$interopDefault","$66ba7a37141049c3$exports","L","map","setView","tileLayer","addTo","$7c236aadba25b053$var$oMarker","JSON","parse","aMarkers","$7c236aadba25b053$var$bPrim","$7c236aadba25b053$var$selectIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","$7c236aadba25b053$var$unSelectIcon","$7c236aadba25b053$var$arrayIdMarkadores","localStorage","getItem","undefined","$7c236aadba25b053$var$lsSesion","css","setTimeout","$","hide","show","fetch","url","method","headers","Accept","Authorization","then","response","json","api","stMunipaNoRep","Set","valGuardados","aSoloBalizas","Array","iPosAbali","forEach","a","length","id","removeLayer","b","munici","puebloJMinus","Municipio","toString","toLowerCase","puebloAMinus","municipio","includes","has","add","marcador","marker","GpxY","GpxX","icon","bindPopup","on","k","slideToggle","slideDown","html","addBaliza","verBaliza","push","catch","err","console","log"],"version":3,"file":"index.41337999.js.map"}