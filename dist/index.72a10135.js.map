{"mappings":"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","sources":["src/scripts/selecMapa.js"],"sourcesContent":["let getsVal;\r\nfunction delBaliza(loc) {\r\n    let valGuardados = JSON.parse(localStorage.getItem(\"balizasGuardadas\"));\r\n    let asBalizas = new Array();\r\n    let i = 0;\r\n    let del = 0;\r\n    valGuardados.forEach(a => {\r\n        if (a[0] == loc) {\r\n            del = i;\r\n        }\r\n        i++;\r\n    });\r\n    i = 0;\r\n    let m = 0;\r\n    valGuardados.forEach(a => {\r\n        if (i != del) {\r\n            asBalizas[m] = a;\r\n            m++;\r\n        }\r\n        i++;\r\n    })\r\n    localStorage.setItem(\"balizasGuardadas\", JSON.stringify([...asBalizas]));\r\n    cambioInicial();\r\n}\r\nwindow.delBaliza = delBaliza;\r\nfunction addBaliza() {\r\n    let localBalizas = new Array();\r\n    let asBalizas = new Set();\r\n    let bal = this.value;\r\n    let i = 0;\r\n    cambioSit();\r\n    let valGuardados = localStorage.getItem(\"balizasGuardadas\");\r\n    if (valGuardados == undefined) {\r\n        console.log(\"solo hay uno\")\r\n        localBalizas[0] = [bal, \"\", \"\", \"\", \"\"]\r\n        document.getElementById(\"dGuardadoError\").innerHTML = \"\";\r\n        fetch(`${url}/api/Tiempo/${bal}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Authorization': `Bearer ${JSON.parse(localStorage.getItem(\"Key\"))}`,\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(b => {\r\n                crearBloque(b.municipio, b.temperatura, b.descripcionTiempo, b.pathImg, b.velocidadViento, b.precipitaciones);\r\n            })\r\n            .catch(err => console.log(err));\r\n        localStorage.setItem(\"balizasGuardadas\", JSON.stringify([...localBalizas]));\r\n    } else {\r\n\r\n        document.getElementById(\"dGuardadoError\").innerHTML = \"\";\r\n        asBalizas = new Set();\r\n        getsVal = JSON.parse(valGuardados);\r\n        getsVal.forEach(a => {\r\n            asBalizas.add(a[0]);\r\n            localBalizas[i] = a;\r\n            i++;\r\n        })\r\n        if (!asBalizas.has(bal)) {\r\n            if (asBalizas.size < 3) {\r\n                localBalizas[i] = [bal, \"\", \"\", \"\", \"\"]\r\n                asBalizas.add(bal);\r\n                fetch(`${url}/api/Tiempo/${bal}`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Authorization': `Bearer ${JSON.parse(localStorage.getItem(\"Key\"))}`,\r\n                    }\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(b => {\r\n                        crearBloque(b.municipio, b.temperatura, b.descripcionTiempo, b.pathImg, b.velocidadViento, b.precipitaciones);\r\n                    })\r\n                    .catch(err => console.log(err));\r\n            } else {\r\n                alert(\"No puedes a√±adir mas de 3 balizas.\");\r\n            }\r\n\r\n        }\r\n        localStorage.setItem(\"balizasGuardadas\", JSON.stringify([...localBalizas]));\r\n    }\r\n}\r\nfunction crearBloque(a, temp, descTiempo, imgTiempo, velViento, precipitaciones) {\r\n    var fecha = new Date;\r\n    document.getElementById(\"dBalizasGuar\").innerHTML +=\r\n        `<div class=\"col-sm-3 balizasGuardada dropAqui\" value=\"${a}\">\r\n        <h6 class=\"hLocalidadGuardada\">${a}</h6>\r\n        <div class=\"dBloqueDatos\">\r\n            <div class=\"dEstado\" id=\"dDatEstado${a}\">\r\n                <!--<p>${fecha.getHours()}:${fecha.getMinutes()}</p>-->\r\n                <p>${descTiempo}</p>\r\n            </div>\r\n            <div class=\"dDatoParam\" id=\"dDatTiempo${a}\">\r\n                <i class=\"bi bi-x-circle btnExit\" id=\"Tiempo_${a}\" value=\"${a}\"></i>  \r\n                <i class=\"bi bi-cloud-sun iconoPanel\"><img src=\"https://opendata.euskadi.eus/${imgTiempo}\" class=\"iEstadoTiempo\"></img></i>\r\n            </div> \r\n            <div class=\"dDatoParam\" id=\"dDatTemperatura${a}\">\r\n                <i class=\"bi bi-x-circle btnExit\" id=\"Temperatura_${a}\" value=\"${a}\"></i> \r\n                <i class=\"bi bi-thermometer iconoPanel\"><span id=\"spParam1\">${temp}&deg;C</span></i>\r\n            </div>\r\n            <div class=\"dDatoParam\" id=\"dDatPrecipitaciones${a}\">\r\n                <i class=\"bi bi-x-circle btnExit\" id=\"Precipitaciones_${a}\" value=\"${a}\"></i> \r\n                <i class=\"bi bi-moisture iconoPanel\"><span id=\"spParam2\">${precipitaciones} ml/h</span></i>\r\n            </div>  \r\n            <div class=\"dDatoParam\" id=\"dDatVelViento${a}\">\r\n                <i class=\"bi bi-x-circle btnExit\" id=\"VelViento_${a}\" value=\"${a}\"></i> \r\n                <i class=\"bi bi-wind iconoPanel\"><span id=\"spParam3\">${velViento} km/h</span></i>\r\n            </div>\r\n                       \r\n        </div>    \r\n    </div>`;\r\n    crearBloqueDraggable();\r\n    cierraBotones();\r\n    paramDrop();\r\n    ocultarMostrarParametro(a);\r\n\r\n}\r\nfunction ocultarMostrarParametro(loc) {\r\n    let valGuardados = JSON.parse(localStorage.getItem(\"balizasGuardadas\"));\r\n    let i = 0;\r\n    let param = 0;\r\n    valGuardados.forEach(a => {\r\n        if (a[0] == loc) param = i;\r\n        i++;\r\n    });\r\n    valGuardados[param].forEach(a => {\r\n        if (a != loc) $(`#dDat${a}${loc}`).show();\r\n        console.log(`#dDat${a}${loc}`);\r\n    })\r\n}\r\nfunction posParametro(p) {\r\n    switch (p) {\r\n        case \"Tiempo\":\r\n            return 1;\r\n        case \"Precipitaciones\":\r\n            return 3;\r\n        case \"Temperatura\":\r\n            return 2;\r\n        case \"VelViento\":\r\n            return 4;\r\n    }\r\n}\r\nwindow.posParametro = posParametro;\r\nfunction editarBloque(a, temp, descTiempo, imgTiempo, velViento, precipitaciones) {\r\n    document.getElementById(`dDatTiempo${a}`).innerHTML = `\r\n    <i class=\"bi bi-x-circle btnExit\" id=\"Tiempo_${a}\" value=\"${a}\"></i>  \r\n    <i class=\"bi bi-cloud-sun iconoPanel\"><img src=\"https://opendata.euskadi.eus/${imgTiempo}\" class=\"iEstadoTiempo\"></img></i>`;\r\n\r\n    document.getElementById(`dDatTemperatura${a}`).innerHTML = `<i class=\"bi bi-x-circle btnExit\" id=\"Temperatura_${a}\" value=\"${a}\"></i> \r\n    <i class=\"bi bi-thermometer iconoPanel\"><span id=\"spParam1\">${temp}&deg;C</span></i>`;\r\n\r\n    document.getElementById(`dDatPrecipitaciones${a}`).innerHTML = ` <i class=\"bi bi-x-circle btnExit\" id=\"Precipitaciones_${a}\" value=\"${a}\"></i> \r\n    <i class=\"bi bi-moisture iconoPanel\"><span id=\"spParam2\">${precipitaciones} ml/h</span></i>`;\r\n\r\n    document.getElementById(`dDatVelViento${a}`).innerHTML = `<i class=\"bi bi-x-circle btnExit\" id=\"velViento_${a}\" value=\"${a}\"></i> \r\n    <i class=\"bi bi-wind iconoPanel\"><span id=\"spParam3\">${velViento} km/h</span></i>`;\r\n\r\n    document.getElementById(`dDatEstado${a}`).innerHTML = `<p>${descTiempo}</p>`;\r\n    crearBloqueDraggable();\r\n    cierraBotones();\r\n    paramDrop();\r\n}\r\nwindow.editarBloque = editarBloque;\r\nfunction cierraBotones() {\r\n    $(\".btnExit\").on(\"click\", e => {\r\n        e.target.parentElement.style.display = \"none\";\r\n        let aId = e.target.id.split(\"_\");\r\n        let sParam = aId[0];\r\n        let loc = aId[1];\r\n\r\n        $(`#dDat${sParam}${loc}`).hide();\r\n        let valGuardados = JSON.parse(localStorage.getItem(\"balizasGuardadas\"));\r\n        let i = 0;\r\n        let pos = 0;\r\n        console.log(sParam)\r\n        console.log(loc)\r\n        let iParam = 0;\r\n        switch (sParam) {\r\n            case \"Tiempo\":\r\n                iParam = 1;\r\n                break;\r\n            case \"Precipitaciones\":\r\n                iParam = 3;\r\n                break;\r\n            case \"Temperatura\":\r\n                iParam = 2;\r\n                break;\r\n            case \"VelViento\":\r\n                iParam = 4;\r\n                break;\r\n        }\r\n        valGuardados.forEach(a => {\r\n            if (a[0] == loc) {\r\n                pos = i;\r\n            }\r\n            i++;\r\n        });\r\n        console.log(iParam)\r\n        console.log(valGuardados[pos]);\r\n        valGuardados[pos][iParam] = \"\";\r\n        console.log(valGuardados[pos][iParam]);\r\n        localStorage.setItem(\"balizasGuardadas\", JSON.stringify([...valGuardados]));\r\n    })\r\n}\r\nfunction verBaliza() {\r\n    let sBaliza = this.value;\r\n    cambioVerBaliza();\r\n    document.getElementById(\"hCabBaliza\").textContent = sBaliza;\r\n}"],"names":["getsVal","delBaliza","loc","valGuardados","JSON","parse","localStorage","getItem","asBalizas","Array","i","del","forEach","a","m","setItem","stringify","cambioInicial","addBaliza","localBalizas","Set","bal","this","value","cambioSit","undefined","console","log","document","getElementById","innerHTML","fetch","url","method","headers","Accept","Authorization","then","response","json","b","crearBloque","municipio","temperatura","descripcionTiempo","pathImg","velocidadViento","precipitaciones","catch","err","add","has","size","alert","temp","descTiempo","imgTiempo","velViento","fecha","Date","getHours","getMinutes","ocultarMostrarParametro","param","$","show","posParametro","p","cierraBotones","on","e","target","parentElement","style","display","aId","id","split","sParam","hide","pos","iParam","window","editarBloque"],"version":3,"file":"index.72a10135.js.map"}